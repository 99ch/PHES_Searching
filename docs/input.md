# Input

## Storage Location
In the home directory of the PHES_Searching folder there should be a file called `storage_location`. In this file there should be a single line describing the path to the input/output folder in the format `file_storage_location = <path to storage location>;`. For example, to use the same PHES_Searching folder, use `file_storage_location = ./;` or for the folder on the pv network drive at ANU use `file_storage_location = ../../../../../p/PHES_Searching/;`.
This location will be referred to as `<storage location>` hereafter.
To use a network location, first ensure the computer is connected to the server (can be accessed through windows explorer). Then in either linux bash or ubuntu (either can be installed on a windows computer), mount the server to the p drive using 
```
sudo mount -t drvfs  \\\\piso.cecs.anu.edu.au\\pv /mnt/p/
``` 
(adjust as needed for an alternate system).

## Digital Elevation Model (DEM)
Place all required DEM files (1 degree by 1 degree with 1 arcsecond resolution supported, other resolutions unknown) in the `<storage location>/input/DEMs` folder with filename `<latitude>_<longitude>_1arc_v3.tif` (e.g. `n00_e000_1arc_v3.tif`).

## Shapefile Exclusions (Filters)
If required, place all shapefile exclusions (filters) in the `<storage location>/input folder` and add them as filters in the variables file (see below). For faster runtimes on bulk runs, see generating shapefile tiles below.

## Existing Reservoirs
__NOTE: This is only required for brownfield searching, steps below can be ignored for purely off-river searching.__

### Shapefile
Place the shapefile containing all existing reservoirs to be checked in the `<storage location>/input/existing_reservoirs` folder and add its filename as the `existing_reservoirs_shp` in the variables file (see below).

### CSV Data
Place the csv spreadsheet containing information about the reservoirs to be tested in the `<storage location>/input/existing_reservoirs` folder and add its filename as the `existing_reservoirs_csv` in the variables file (see below).
A header row must be present, and columns must match the columns depicted below.

| Name | Latitude | Longitude | Elevation (m) | Volume (GL) |
|---------------|----------|-----------|---------------|-------------|
| Lake Barambah | -26.3038 | 151.9789  | 306           | 133.9       |
| ... | ... |...|...|...|

### Names
Place the spreadsheet containing the reservoir names corresponding to the polygons in the shapefile in the order they occur in the shape files (all polygons must be included, details on generating this file from the dbf are outlined below) in the `<storage location>/input/existing_reservoirs` folder and add its filename as the `existing_reservoirs_shp_names` in the variables file (see below).
A header row must be present, and columns must match the columns depicted below.

| Name |
|------|
|Lake Paluma|
|...|

#### Generating names csv from dbf
The csv with a list of names can be generated by using excel to open the dbf file attached to the shapefile of existing reservoirs, finding the column that corresponds to the name and copy and pasting it into a new file (as seen above).

# Variables
All variables that can be adjusted are in the variables file in the home directory of `<storage location>` and are briefly outlined in the table below. Each line is in the format `<variable> = <value>;` and `//` is treated as a comment (similar to C++ formatting).

An example variable file (`example_variables`) can be found in the root directory of the repository. It is advised that this file is copied and renamed `variables` and then edited as required. 

## Generating Shapefile Tiles
Ensure filters to tile are set as variables using `filter_to_tile = <filename>`; in the variables file at `<storage location>`. Running shapefile_tiling (use `./bin/shapefile_tiling` in bash) will then generate shapefile tiles (subsets of the polygons) for each of the cells in the task list.
